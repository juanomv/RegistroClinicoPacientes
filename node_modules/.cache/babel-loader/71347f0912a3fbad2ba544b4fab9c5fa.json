{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nconst WOFF = 'application/font-woff';\nconst JPEG = 'image/jpeg';\nconst mimes = {\n  woff: WOFF,\n  woff2: WOFF,\n  ttf: 'application/font-truetype',\n  eot: 'application/vnd.ms-fontobject',\n  png: 'image/png',\n  jpg: JPEG,\n  jpeg: JPEG,\n  gif: 'image/gif',\n  tiff: 'image/tiff',\n  svg: 'image/svg+xml'\n};\nexport function getExtension(url) {\n  const match = /\\.([^./]*?)$/g.exec(url);\n  return match ? match[1] : '';\n}\nexport function getMimeType(url) {\n  const extension = getExtension(url).toLowerCase();\n  return mimes[extension] || '';\n}\nexport function resolveUrl(url, baseUrl) {\n  // url is absolute already\n  if (url.match(/^[a-z]+:\\/\\//i)) {\n    return url;\n  } // url is absolute already, without protocol\n\n\n  if (url.match(/^\\/\\//)) {\n    return window.location.protocol + url;\n  } // dataURI, mailto:, tel:, etc.\n\n\n  if (url.match(/^[a-z]+:/i)) {\n    return url;\n  }\n\n  const doc = document.implementation.createHTMLDocument();\n  const base = doc.createElement('base');\n  const a = doc.createElement('a');\n  doc.head.appendChild(base);\n  doc.body.appendChild(a);\n\n  if (baseUrl) {\n    base.href = baseUrl;\n  }\n\n  a.href = url;\n  return a.href;\n}\nexport function isDataUrl(url) {\n  return url.search(/^(data:)/) !== -1;\n}\nexport function makeDataUrl(content, mimeType) {\n  return `data:${mimeType};base64,${content}`;\n}\nexport function parseDataUrlContent(dataURL) {\n  return dataURL.split(/,/)[1];\n}\nexport const uuid = function uuid() {\n  // generate uuid for className of pseudo elements.\n  // We should not use GUIDs, otherwise pseudo elements sometimes cannot be captured.\n  let counter = 0; // ref: http://stackoverflow.com/a/6248722/2519373\n\n  const random = () => // eslint-disable-next-line no-bitwise\n  `0000${(Math.random() * Math.pow(36, 4) << 0).toString(36)}`.slice(-4);\n\n  return () => {\n    counter += 1;\n    return `u${random()}${counter}`;\n  };\n}();\nexport const delay = ms => args => new Promise(resolve => setTimeout(() => resolve(args), ms));\nexport function toArray(arrayLike) {\n  const arr = [];\n\n  for (let i = 0, l = arrayLike.length; i < l; i += 1) {\n    arr.push(arrayLike[i]);\n  }\n\n  return arr;\n}\n\nfunction px(node, styleProperty) {\n  const val = window.getComputedStyle(node).getPropertyValue(styleProperty);\n  return parseFloat(val.replace('px', ''));\n}\n\nexport function getNodeWidth(node) {\n  const leftBorder = px(node, 'border-left-width');\n  const rightBorder = px(node, 'border-right-width');\n  return node.clientWidth + leftBorder + rightBorder;\n}\nexport function getNodeHeight(node) {\n  const topBorder = px(node, 'border-top-width');\n  const bottomBorder = px(node, 'border-bottom-width');\n  return node.clientHeight + topBorder + bottomBorder;\n}\nexport function getPixelRatio() {\n  let ratio;\n  let FINAL_PROCESS;\n\n  try {\n    FINAL_PROCESS = process;\n  } catch (e) {// pass\n  }\n\n  const val = FINAL_PROCESS && FINAL_PROCESS.env ? FINAL_PROCESS.env.devicePixelRatio : null;\n\n  if (val) {\n    ratio = parseInt(val, 10);\n\n    if (Number.isNaN(ratio)) {\n      ratio = 1;\n    }\n  }\n\n  return ratio || window.devicePixelRatio || 1;\n}\nexport function canvasToBlob(canvas) {\n  if (canvas.toBlob) {\n    return new Promise(resolve => canvas.toBlob(resolve));\n  }\n\n  return new Promise(resolve => {\n    const binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n    const len = binaryString.length;\n    const binaryArray = new Uint8Array(len);\n\n    for (let i = 0; i < len; i += 1) {\n      binaryArray[i] = binaryString.charCodeAt(i);\n    }\n\n    resolve(new Blob([binaryArray], {\n      type: 'image/png'\n    }));\n  });\n}\nexport function createImage(url) {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n\n    img.onload = () => resolve(img);\n\n    img.onerror = reject;\n    img.crossOrigin = 'anonymous';\n    img.decoding = 'sync';\n    img.src = url;\n  });\n}\nexport function svgToDataURL(svg) {\n  return __awaiter(this, void 0, void 0, function* () {\n    return Promise.resolve().then(() => new XMLSerializer().serializeToString(svg)).then(encodeURIComponent).then(html => `data:image/svg+xml;charset=utf-8,${html}`);\n  });\n}\nexport function nodeToDataURL(node, width, height) {\n  return __awaiter(this, void 0, void 0, function* () {\n    const xmlns = 'http://www.w3.org/2000/svg';\n    const svg = document.createElementNS(xmlns, 'svg');\n    const foreignObject = document.createElementNS(xmlns, 'foreignObject');\n    svg.setAttribute('width', `${width}`);\n    svg.setAttribute('height', `${height}`);\n    svg.setAttribute('viewBox', `0 0 ${width} ${height}`);\n    foreignObject.setAttribute('width', '100%');\n    foreignObject.setAttribute('height', '100%');\n    foreignObject.setAttribute('x', '0');\n    foreignObject.setAttribute('y', '0');\n    foreignObject.setAttribute('externalResourcesRequired', 'true');\n    svg.appendChild(foreignObject);\n    foreignObject.appendChild(node);\n    return svgToDataURL(svg);\n  });\n}","map":{"version":3,"sources":["../src/util.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nconst WOFF = 'application/font-woff';\nconst JPEG = 'image/jpeg';\nconst mimes = {\n    woff: WOFF,\n    woff2: WOFF,\n    ttf: 'application/font-truetype',\n    eot: 'application/vnd.ms-fontobject',\n    png: 'image/png',\n    jpg: JPEG,\n    jpeg: JPEG,\n    gif: 'image/gif',\n    tiff: 'image/tiff',\n    svg: 'image/svg+xml',\n};\nexport function getExtension(url) {\n    const match = /\\.([^./]*?)$/g.exec(url);\n    return match ? match[1] : '';\n}\nexport function getMimeType(url) {\n    const extension = getExtension(url).toLowerCase();\n    return mimes[extension] || '';\n}\nexport function resolveUrl(url, baseUrl) {\n    // url is absolute already\n    if (url.match(/^[a-z]+:\\/\\//i)) {\n        return url;\n    }\n    // url is absolute already, without protocol\n    if (url.match(/^\\/\\//)) {\n        return window.location.protocol + url;\n    }\n    // dataURI, mailto:, tel:, etc.\n    if (url.match(/^[a-z]+:/i)) {\n        return url;\n    }\n    const doc = document.implementation.createHTMLDocument();\n    const base = doc.createElement('base');\n    const a = doc.createElement('a');\n    doc.head.appendChild(base);\n    doc.body.appendChild(a);\n    if (baseUrl) {\n        base.href = baseUrl;\n    }\n    a.href = url;\n    return a.href;\n}\nexport function isDataUrl(url) {\n    return url.search(/^(data:)/) !== -1;\n}\nexport function makeDataUrl(content, mimeType) {\n    return `data:${mimeType};base64,${content}`;\n}\nexport function parseDataUrlContent(dataURL) {\n    return dataURL.split(/,/)[1];\n}\nexport const uuid = (function uuid() {\n    // generate uuid for className of pseudo elements.\n    // We should not use GUIDs, otherwise pseudo elements sometimes cannot be captured.\n    let counter = 0;\n    // ref: http://stackoverflow.com/a/6248722/2519373\n    const random = () => \n    // eslint-disable-next-line no-bitwise\n    `0000${((Math.random() * Math.pow(36, 4)) << 0).toString(36)}`.slice(-4);\n    return () => {\n        counter += 1;\n        return `u${random()}${counter}`;\n    };\n})();\nexport const delay = (ms) => (args) => new Promise((resolve) => setTimeout(() => resolve(args), ms));\nexport function toArray(arrayLike) {\n    const arr = [];\n    for (let i = 0, l = arrayLike.length; i < l; i += 1) {\n        arr.push(arrayLike[i]);\n    }\n    return arr;\n}\nfunction px(node, styleProperty) {\n    const val = window.getComputedStyle(node).getPropertyValue(styleProperty);\n    return parseFloat(val.replace('px', ''));\n}\nexport function getNodeWidth(node) {\n    const leftBorder = px(node, 'border-left-width');\n    const rightBorder = px(node, 'border-right-width');\n    return node.clientWidth + leftBorder + rightBorder;\n}\nexport function getNodeHeight(node) {\n    const topBorder = px(node, 'border-top-width');\n    const bottomBorder = px(node, 'border-bottom-width');\n    return node.clientHeight + topBorder + bottomBorder;\n}\nexport function getPixelRatio() {\n    let ratio;\n    let FINAL_PROCESS;\n    try {\n        FINAL_PROCESS = process;\n    }\n    catch (e) {\n        // pass\n    }\n    const val = FINAL_PROCESS && FINAL_PROCESS.env\n        ? FINAL_PROCESS.env.devicePixelRatio\n        : null;\n    if (val) {\n        ratio = parseInt(val, 10);\n        if (Number.isNaN(ratio)) {\n            ratio = 1;\n        }\n    }\n    return ratio || window.devicePixelRatio || 1;\n}\nexport function canvasToBlob(canvas) {\n    if (canvas.toBlob) {\n        return new Promise((resolve) => canvas.toBlob(resolve));\n    }\n    return new Promise((resolve) => {\n        const binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n        const len = binaryString.length;\n        const binaryArray = new Uint8Array(len);\n        for (let i = 0; i < len; i += 1) {\n            binaryArray[i] = binaryString.charCodeAt(i);\n        }\n        resolve(new Blob([binaryArray], { type: 'image/png' }));\n    });\n}\nexport function createImage(url) {\n    return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => resolve(img);\n        img.onerror = reject;\n        img.crossOrigin = 'anonymous';\n        img.decoding = 'sync';\n        img.src = url;\n    });\n}\nexport function svgToDataURL(svg) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return Promise.resolve()\n            .then(() => new XMLSerializer().serializeToString(svg))\n            .then(encodeURIComponent)\n            .then((html) => `data:image/svg+xml;charset=utf-8,${html}`);\n    });\n}\nexport function nodeToDataURL(node, width, height) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const xmlns = 'http://www.w3.org/2000/svg';\n        const svg = document.createElementNS(xmlns, 'svg');\n        const foreignObject = document.createElementNS(xmlns, 'foreignObject');\n        svg.setAttribute('width', `${width}`);\n        svg.setAttribute('height', `${height}`);\n        svg.setAttribute('viewBox', `0 0 ${width} ${height}`);\n        foreignObject.setAttribute('width', '100%');\n        foreignObject.setAttribute('height', '100%');\n        foreignObject.setAttribute('x', '0');\n        foreignObject.setAttribute('y', '0');\n        foreignObject.setAttribute('externalResourcesRequired', 'true');\n        svg.appendChild(foreignObject);\n        foreignObject.appendChild(node);\n        return svgToDataURL(svg);\n    });\n}\n//# sourceMappingURL=util.js.map"]},"metadata":{},"sourceType":"module"}